# ┌────────────────────────────────────────────────────────────┐
# │ Hypridle config - basic but useful (lock + DPMS + suspend) │
# └────────────────────────────────────────────────────────────┘

general {
    lock_cmd       = pidof hyprlock || hyprlock       # lock with hyprlock (fallback if already running)
    before_sleep_cmd = loginctl lock-session          # lock before suspend (extra safety)
    after_sleep_cmd  = hyprctl dispatch dpms on       # ensure screens wake properly (helps on some NVIDIA setups)

    ignore_dbus_inhibit    = false    # respect apps like video players that inhibit idle
    ignore_systemd_inhibit = false
}

# ──────────────────────────────────────────────────────────────
# Listener 1: Dim / turn off screen after 5 minutes (300 s)
listener {
    timeout          = 300
    on-timeout       = hyprctl keyword monitor ,dpms off   # turn off all monitors' DPMS
    on-resume        = hyprctl keyword monitor ,dpms on    # turn back on
}

# ──────────────────────────────────────────────────────────────
# Listener 2: Lock screen after 10 minutes (600 s)
listener {
    timeout          = 600
    on-timeout       = hyprlock                           # or whatever your lockscreen is
    # on-resume      = notify-send "Welcome back!"        # optional
}

# ──────────────────────────────────────────────────────────────
# Listener 3: Suspend the system after 15 minutes (900 s)
#             Comment out if you don't want auto-suspend
listener {
    timeout          = 900
    on-timeout       = systemctl suspend
    # on-resume      = notify-send "Woke up from suspend!"
}
